# ğŸš¨ ç´§æ€¥ï¼šéœ€è¦é‡æ–°æ„å»ºï¼

## é—®é¢˜å‘ç°

æ—¥å¿—æ˜¾ç¤º**æ¸…ç†ä»£ç å®Œå…¨æ²¡æœ‰æ‰§è¡Œ**ï¼š
- âŒ æ²¡æœ‰ "ğŸ§¹ Checking for previous physics components"
- âŒ æ²¡æœ‰ "âš ï¸ æ£€æµ‹åˆ°æœªæ¸…ç†çš„ç‰©ç†ç»„ä»¶"
- âŒ æ²¡æœ‰ "âœ… å·²æ¸…ç† XX ä¸ªç‰©ç†ç»„ä»¶"

ä½†æ˜¯ä»£ç å·²ç»æäº¤äº†ï¼ˆcommit 5d34a15ï¼‰ã€‚

**åŸå› **ï¼šæµè§ˆå™¨è¿˜åœ¨ä½¿ç”¨æ—§çš„æ‰“åŒ…æ–‡ä»¶ï¼

æ„å»ºæ—¶é—´ï¼š16:12  
å½“å‰æ—¶é—´ï¼š17:11+  
â†’ ä½¿ç”¨çš„æ˜¯1å°æ—¶å‰çš„æ—§ä»£ç ï¼

## è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1ï¼šæ¸…é™¤æ—§æ„å»º
```bash
cd /Users/qihongrui/Desktop/sa2kit
rm -rf dist/ .next/
```

### æ­¥éª¤ 2ï¼šé‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# å¦‚æœæ˜¯å¼€å‘æ¨¡å¼
npm run dev

# æˆ–è€…å¦‚æœæ˜¯ç”Ÿäº§æ„å»º
npm run build
npm run start
```

### æ­¥éª¤ 3ï¼šå¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨
- Mac: `Cmd + Shift + R`
- Windows: `Ctrl + Shift + R`
- æˆ–è€…ï¼šæ‰“å¼€å¼€å‘è€…å·¥å…· â†’ Network â†’ å‹¾é€‰ "Disable cache"

### æ­¥éª¤ 4ï¼šéªŒè¯æ–°ä»£ç å·²åŠ è½½

åˆ·æ–°åï¼Œåˆ‡æ¢æ¨¡å‹ï¼Œåº”è¯¥ç«‹å³çœ‹åˆ°ï¼š

```
[MMDPlayerBase] ğŸ§¹ Checking for previous physics components...
[MMDPlayerBase] â„¹ï¸ æ²¡æœ‰éœ€è¦æ¸…ç†çš„ç‰©ç†ç»„ä»¶
[MMDPlayerBase] ğŸ¯ Setting up physics component tracking (FIRST TIME)...
```

å¦‚æœçœ‹åˆ°è¿™äº›æ—¥å¿—ï¼Œè¯´æ˜æ–°ä»£ç å·²ç”Ÿæ•ˆï¼

### æ­¥éª¤ 5ï¼šç¬¬äºŒæ¬¡åˆ‡æ¢éªŒè¯

å†æ¬¡åˆ‡æ¢æ¨¡å‹ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
[MMDPlayerBase] ğŸ§¹ Checking for previous physics components...
[MMDPlayerBase] âš ï¸ æ£€æµ‹åˆ°æœªæ¸…ç†çš„ç‰©ç†ç»„ä»¶ï¼Œç«‹å³æ¸…ç†...
[MMDPlayerBase] ğŸ“Š æœªæ¸…ç†ç»„ä»¶æ•°é‡: { worlds: 15, total: 75 }
[MMDPlayerBase]   âœ… Destroyed world #15
[MMDPlayerBase]   âœ… Destroyed world #14
...
[MMDPlayerBase] âœ… å·²æ¸…ç† 75 ä¸ªç‰©ç†ç»„ä»¶
[MMDPlayerBase] â„¹ï¸ Monkey Patch already setup, skipping
[MMDPlayerBase] ğŸ” Captured btDefaultCollisionConfiguration #1  â† ä»1å¼€å§‹
```

## å½“å‰é—®é¢˜

ä½ ç°åœ¨çœ‹åˆ°çš„ï¼š
```
[MMDPlayerBase] ğŸ” Captured btDiscreteDynamicsWorld #15
...
[MMDPlayerBase] ğŸ” Captured btDiscreteDynamicsWorld #1
[MMDPlayerBase] ğŸ” Captured btDiscreteDynamicsWorld #1
```

é—®é¢˜ï¼š
1. âœ… æ•°ç»„è¢«é‡ç½®äº†ï¼ˆä»#1å¼€å§‹ï¼‰
2. âŒ ä½†æ—§çš„15ä¸ªå¯¹è±¡æ²¡æœ‰è¢«é”€æ¯
3. âŒ å®ƒä»¬åœ¨ WASM å†…å­˜ä¸­ç´¯ç§¯

æ¯æ¬¡åˆ‡æ¢ï¼š
- æ—§ä»£ç ï¼šæ³„æ¼ 75 ä¸ªå¯¹è±¡ï¼ˆ15Ã—5ï¼‰
- æ–°ä»£ç ï¼šæ¸…ç† 75 ä¸ªï¼Œç„¶ååˆ›å»º 75 ä¸ªæ–°çš„

æ‰€ä»¥**å¿…é¡»ä½¿ç”¨æ–°ä»£ç ï¼**

## å¿«é€Ÿæ£€æŸ¥

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
// æ£€æŸ¥ Ammo æ˜¯å¦æœ‰æˆ‘ä»¬çš„æ ‡è®°
console.log('Monkey Patch æ ‡è®°:', window.Ammo?.__sa2kitMonkeyPatched);
```

- å¦‚æœè¾“å‡º `true`ï¼šæ–°ä»£ç å·²åŠ è½½ âœ…
- å¦‚æœè¾“å‡º `undefined`ï¼šè¿˜æ˜¯æ—§ä»£ç  âŒ

## æ€»ç»“

**ç«‹å³è¡ŒåŠ¨**ï¼š
1. åœæ­¢å¼€å‘æœåŠ¡å™¨ï¼ˆCtrl+Cï¼‰
2. åˆ é™¤æ„å»ºæ–‡ä»¶ï¼š`rm -rf dist/ .next/`
3. é‡å¯æœåŠ¡å™¨ï¼š`npm run dev`
4. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ï¼š`Cmd+Shift+R`
5. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ–°ä»£ç ç”Ÿæ•ˆ

è¿™æ ·æ‰èƒ½çœŸæ­£æµ‹è¯•ä¿®å¤æ•ˆæœï¼

